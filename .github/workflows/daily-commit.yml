name: Daily Activity

on:
  schedule:
    # Runs at random times throughout the day (multiple triggers for variety)
    - cron: '0 9 * * *'   # 9 AM UTC
    - cron: '0 14 * * *'  # 2 PM UTC
    - cron: '0 20 * * *'  # 8 PM UTC
  workflow_dispatch: # Allow manual trigger

jobs:
  commit:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Configure Git
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

      - name: Random Activity
        run: |
          # Random chance to skip (creates natural gaps)
          SKIP_CHANCE=$((RANDOM % 10))
          if [ $SKIP_CHANCE -lt 2 ]; then
            echo "Skipping this run for natural variation"
            exit 0
          fi

          # Random number of commits (1-3)
          NUM_COMMITS=$((RANDOM % 3 + 1))

          for i in $(seq 1 $NUM_COMMITS); do
            # Update the activity log
            TIMESTAMP=$(date -u +"%Y-%m-%d %H:%M:%S UTC")
            RANDOM_HASH=$(head /dev/urandom | tr -dc 'a-f0-9' | head -c 8)

            echo "Activity: $TIMESTAMP - $RANDOM_HASH" >> activity.log

            git add activity.log
            git commit -m "Update activity log: $RANDOM_HASH"

            # Small delay between commits
            sleep $((RANDOM % 5 + 1))
          done

          git push
